{"version":3,"sources":["webpack:///src/app/pages/camera/camera.page.html","webpack:///src/app/pages/camera/camera.page.scss","webpack:///src/app/pages/camera/camera-routing.module.ts","webpack:///src/app/pages/camera/camera.module.ts","webpack:///src/app/pages/camera/camera.page.ts"],"names":["routes","path","component","CameraPageRoutingModule","imports","forChild","exports","CameraPageModule","declarations","CameraPage","location","qrScanner","toastCtrl","route","router","cart","items","price","type","text","localStorage","getItem","undefined","JSON","parse","params","subscribe","console","log","window","document","querySelector","classList","add","prepare","then","status","authorized","show","scanSubscription","scan","showToaster","error","e","unsubscribe","remove","hide","destroy","stopScanning","back","item","id","parseFloat","itemExists","setItem","stringify","json","parseJSON","navigateByUrl","addItem","create","message","title","position","duration","buttons","role","handler","toast","present","selector","template"],"mappings":"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","file":"pages-camera-camera-module-es5.js","sourcesContent":["export default \"\\n<ion-content class=\\\"transparentBody\\\" >\\n    <div class=\\\"header\\\">\\n      <div class=\\\"left\\\" (click)=\\\"goBack()\\\" >\\n        <ion-icon name=\\\"chevron-back-outline\\\"></ion-icon>\\n        <p>Regresar</p>\\n      </div>\\n    </div>\\n  </ion-content>\";","export default \"ion-content {\\n  --background: transparent !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY2FtZXJhL2NhbWVyYS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxvQ0FBQTtBQUNKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvY2FtZXJhL2NhbWVyYS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tY29udGVudCB7XG4gICAgLS1iYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xuIH0iXX0= */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CameraPage } from './camera.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CameraPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CameraPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CameraPageRoutingModule } from './camera-routing.module';\n\nimport { CameraPage } from './camera.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CameraPageRoutingModule\n  ],\n  declarations: [CameraPage]\n})\nexport class CameraPageModule {}\n","import { Component, OnInit } from \"@angular/core\";\nimport { QRScanner, QRScannerStatus } from \"@ionic-native/qr-scanner/ngx\";\nimport { ToastController } from \"@ionic/angular\";\nimport { Location } from \"@angular/common\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\n@Component({\n  selector: \"app-camera\",\n  templateUrl: \"./camera.page.html\",\n  styleUrls: [\"./camera.page.scss\"],\n})\nexport class CameraPage implements OnInit {\n  cart = {\n    items: 0,\n    price: 0,\n  };\n  constructor(\n    private location: Location,\n    private qrScanner: QRScanner,\n    private toastCtrl: ToastController,\n    private route: ActivatedRoute,\n    private router: Router\n  ) {}\n  type = \"products\";\n  text =\n    '{\"image_path\":\"https://bills-tec-ccm-2020-cloud.s3.amazonaws.com/1603852416615.jpeg\",\"description\":\"Tacos de pastor\",\"id\":\"3a987608-861a-4dac-8041-1d1c523a790d\",\"price\":\"10\",\"title\":\"Tacos Velez\"}';\n  ngOnInit() {\n    if (localStorage.getItem(\"cart\") != undefined) {\n      this.cart = JSON.parse(localStorage.getItem(\"cart\"));\n    }\n\n    this.route.params.subscribe((params) => {\n      console.log(params);\n      if (params.type != undefined) {\n        this.type = params.type;\n      }\n      // this.showToaster(this.text);\n    });\n  }\n  scanSubscription;\n\n  scan() {\n    (window.document.querySelector(\"ion-app\") as HTMLElement).classList.add(\"cameraView\");\n    this.qrScanner\n      .prepare()\n      .then((status: QRScannerStatus) => {\n        if (status.authorized) {\n          this.qrScanner.show();\n          this.scanSubscription = this.qrScanner.scan().subscribe(async (text: string) => {\n            this.showToaster(text);\n          });\n        } else {\n          console.error(\"Permission Denied\", status);\n        }\n      })\n      .catch((e: any) => {\n        console.error(\"Error\", e);\n      });\n  }\n  stopScanning() {\n    this.scanSubscription ? this.scanSubscription.unsubscribe() : null;\n    this.scanSubscription = null;\n    (window.document.querySelector(\"ion-app\") as HTMLElement).classList.remove(\"cameraView\");\n    this.qrScanner.hide();\n    this.qrScanner.destroy();\n  }\n  ionViewWillEnter() {\n    this.scan();\n  }\n  ionViewWillLeave() {\n    this.stopScanning();\n  }\n\n  goBack() {\n    this.location.back();\n  }\n\n  addItem(item) {\n    if (this.cart[item.id] != undefined) {\n      console.log(\"add\");\n      item.cart = this.cart[item.id].cart = this.cart[item.id].cart + 1;\n    } else {\n      item.cart = 1;\n    }\n\n    this.cart.items++;\n    this.cart.price += parseFloat(item.price);\n\n    let itemExists = false;\n    //@ts-ignore\n    this.cart[item.id] = item;\n    localStorage.setItem(\"cart\", JSON.stringify(this.cart));\n  }\n\n  async showToaster(json) {\n    let parseJSON = JSON.parse(json);\n    if (this.type == \"market\") {\n      this.router.navigateByUrl(\"/newhome/\" + parseJSON.id);\n    } else {\n      this.addItem(parseJSON);\n      console.log(this.cart);\n\n      let toast = await this.toastCtrl.create({\n        message: `Se a√±adio al carrito ${parseJSON.title}`,\n        position: \"bottom\",\n        duration: 3000,\n        buttons: [\n          // {\n          //   side: \"start\",\n          //   icon: \"star\",\n          //   text: \"Favorite\",\n          //   handler: () => {\n          //     console.log(\"Favorite clicked\");\n          //   },\n          // },\n          {\n            text: \"Pagar\",\n            role: \"cancel\",\n            handler: () => {\n              this.router.navigateByUrl(\"/cart\");\n              console.log(\"Cancel clicked\");\n            },\n          },\n        ],\n      });\n      toast.present();\n    }\n  }\n}\n"]}